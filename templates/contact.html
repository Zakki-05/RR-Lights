{% extends 'base.html' %}

{% block title %}Contact Us - RR Light House{% endblock %}

{% block content %}
<section class="contact-section section-padding">
    <div class="container">
        <h2 class="section-title">Get In Touch</h2>

        <div class="contact-grid">
            <!-- Contact Info -->
            <div class="contact-info">
                <div class="info-item">
                    <i class="fa-solid fa-location-dot"></i>
                    <div>
                        <h3>Our Location</h3>
                        <p>Main Road, Pernambut, Tamil Nadu - 635810</p>
                    </div>
                </div>
                <div class="info-item">
                    <i class="fa-solid fa-phone"></i>
                    <div>
                        <h3>Phone</h3>
                        <p>+91 98765 43210</p>
                    </div>
                </div>
                <div class="info-item">
                    <i class="fa-solid fa-envelope"></i>
                    <div>
                        <h3>Email</h3>
                        <p>info@rr-lighthouse.com</p>
                    </div>
                </div>

                <!-- Google Map -->
                <div class="map-container">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3890.0!2d78.7!3d12.9!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTLCsDU0JzAwLjAiTiA3OMKwNDInMDAuMCJF!5e0!3m2!1sen!2sin!4v1600000000000!5m2!1sen!2sin"
                        width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-wrapper">
                <form id="contact-form">
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" required placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="email">Email (Optional)</label>
                        <input type="email" id="email" placeholder="john@example.com">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone (Optional)</label>
                        <input type="tel" id="phone" placeholder="+91 9876543210">
                    </div>
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" required rows="5" placeholder="I'm interested in..."></textarea>
                    </div>
                    <button type="submit" class="btn">Send Message</button>
                    <div id="form-message" style="margin-top: 1rem;"></div>
                </form>
            </div>
        </div>
    </div>
</section>


{% endblock %}

{% block scripts %}
<script>
    document.getElementById('contact-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = e.target.querySelector('button');
        const msgDiv = document.getElementById('form-message');

        btn.disabled = true;
        btn.textContent = 'Sending...';
        msgDiv.textContent = '';

        const data = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            message: document.getElementById('message').value
        };

        try {
            const response = await fetch('/api/contact', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await response.json();

            if (response.ok) {
                msgDiv.textContent = result.success;
                msgDiv.style.color = '#25D366'; // Success Green
                e.target.reset();
            } else {
                msgDiv.textContent = result.error || 'Something went wrong.';
                msgDiv.style.color = 'red';
            }
        } catch (err) {
            msgDiv.textContent = 'Network error. Please try again.';
            msgDiv.style.color = 'red';
        } finally {
            btn.disabled = false;
            btn.textContent = 'Send Message';
        }
    });
</script>
{% endblock %}